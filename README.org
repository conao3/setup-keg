#+title: setup-keg
#+author: conao3

[[https://github.com/conao3/setup-keg][https://raw.githubusercontent.com/conao3/files/master/blob/headers/png/setup-keg.png]]

[[https://github.com/conao3/setup-keg/blob/master/LICENSE][https://img.shields.io/github/license/conao3/setup-keg.svg?style=flat-square]]
[[https://github.com/conao3/setup-keg/releases][https://img.shields.io/github/tag/conao3/setup-keg.svg?style=flat-square]]
[[https://github.com/conao3/setup-keg/actions][https://img.shields.io/github/actions/workflow/status/conao3/setup-keg/main.yml?style=flat-square]]

A GitHub Action that installs [[https://github.com/keg/keg][Keg]] for your CI workflow.

* Overview

This action sets up Keg in your GitHub Actions workflow by:

- Installing the specified version of Keg to =~/.keg=
- Adding =~/.keg/bin= to your =PATH=
- Initializing Keg for immediate use

* Quick Start

Keg requires Emacs, so you'll need to set up Emacs first using [[https://github.com/purcell/setup-emacs][setup-emacs]].

#+begin_src yaml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: purcell/setup-emacs@master
        with:
          version: '29.1'
      - uses: conao3/setup-keg@master
      - run: keg run test
#+end_src

* Configuration

| Input     | Description                                      | Default      |
|-----------+--------------------------------------------------+--------------|
| =version= | Keg version to install (e.g., "0.8.4", "snapshot") | ="snapshot"= |

See the [[https://github.com/keg/keg/releases][Keg releases page]] for available versions.

* Examples

** Testing with a specific Emacs version

#+begin_src yaml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: purcell/setup-emacs@master
        with:
          version: '29.1'
      - uses: conao3/setup-keg@master
        with:
          version: 'snapshot'
      - run: keg run test
#+end_src

** Matrix testing across multiple Emacs versions

#+begin_src yaml
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        emacs_version:
          - '28.2'
          - '29.1'
          - 'snapshot'
    steps:
      - uses: actions/checkout@v4
      - uses: purcell/setup-emacs@master
        with:
          version: ${{ matrix.emacs_version }}
      - uses: conao3/setup-keg@master
      - run: keg run test
#+end_src

* Contributing

Contributions are welcome. Feel free to open an issue or submit a pull request.

* License

MIT License. See [[https://github.com/conao3/setup-keg/blob/master/LICENSE][LICENSE]] for details.

Copyright (c) Naoya Yamashita ([[https://github.com/conao3][conao3]])
